# grep コマンド

## grep による検索

```console
$ seq 100 | grep "0" | xargs
10 20 30 40 50 60 70 80 90 100
```

`grep`コマンドは、引数に指定した文字列のある行を出力可能である。

```console
$ seq 1000 | grep "^1.0$" | xargs
100 110 120 130 140 150 160 170 180 190
$ seq 100 | grep "^10*$ | xargs"
1 10 100
$ seq 10 | grep "[02468]$" | xargs
2 4 6 8 10
$ seq 10 | grep "[^02468]$" | xargs
1 3 5 7 9
$ seq 100 | grep -E "^(.)\1$" | xargs
11 22 33 44 55 66 77 88 99
```

正規表現を指定することができる。`-E`オプションがない状態では基本正規表現を、ある状態では拡張正規表現を扱っている。

## grep による切り出し

```console
$ echo 中村 山田 田代 上田 | grep -o "[^ ]田
山田
上田
```

`-o`オプションで正規表現にマッチする部分だけを切り出すことができ、`[^ ]田`の正規表現により「スペースでない１文字と田」がマッチする「`grep -o ".田"`」のようにすると、「田代」がマッチしてしまう。

## 正規表現の選択

grep コマンドでは、正規表現形式を指定して文字列を検索する。

|短いオプション名|長いオプション名|説明|
|---|---|---|
|`-E`|`--extended-regexp`|PATTERNを拡張正規表現(ERE)として扱う|
|`-F`|`--fixed-strings`|PATTERNを改行で区切られた固定文字列のリストとして扱い、その文字列のいずれかとマッチするかどうかを調べる|
|`-G`|`--basic-regexp`|PATTERNを基本正規表現(BRE)として扱う。これがデフォルトとなる|
|`-P`|`--perl-regexp`|PATTERNをPerl互換の正規表現(PCRE)として扱う|

## 漢字の抽出

```console
$ echo 吾輩は猫である。 | grep -o '[一-龠]'
吾
輩
猫
```

Unicode　ではおおよそ漢字が「一」と「龠」の間に入っている。

## 参考

- [1日1問、半年以内に習得 シェル・ワンライナー160本ノック](https://gihyo.jp/book/2021/978-4-297-12267-6)
- [GREP](https://linuxjm.osdn.jp/html/GNU_grep/man1/grep.1.html)
