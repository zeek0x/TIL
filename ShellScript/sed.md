# sed コマンド

## sed による置換

```console
$ echo クロロエチルエチルエーテル | sed 's/エ/メ/'
クロロメチルエチルエーテル
```

`s`が文字の置換を意味しており、`sed 's/文字列1/文字列2/'`は「与えられた行の最初の文字列1を文字列2に置換する」を意味している。

```console
$ echo クロロエチルエチルエーテル | sed 's/エチルエ/エチルメ/'
クロロエチルメチルエーテル
```

検索文字列を長くして2度目の「エチル」の「エ」を「メ」に置換している。

```console
$ echo クロロエチルエチルエーテル | sed 's/エ/メ/g'
クロロメチルメチルメーテル
```

すべての検索対象文字列を置換したい場合は、`g`を付ける。

```console
$ echo クロロエチルエーテル | sed 's/エチル/&&/'
クロロエチルエチルエーテル
```

`&`を使用すると検索対象の文字を再利用することができる。

```console
$ echo クロロメチルエチルエーテル | sed -E 's/(メチル)(エチル)/\2\1/'
クロロエチルメチルエーテル
```

検索対象の文字列を括弧で囲むことで順番に番号が与えられ、置換後の文字列で`\1`, `\2`, ... と呼び出すことができる。このような文字列の再利用機能は後方参照と呼ばれる。`-E`オプションで拡張正規表現を有効化して、括弧にエスケープ文字を書かずに済むようにしている。

## 参考

[1日1問、半年以内に習得 シェル・ワンライナー160本ノック](https://gihyo.jp/book/2021/978-4-297-12267-6)
