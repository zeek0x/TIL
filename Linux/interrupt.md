# 割り込みハンドラ

割り込みハンドラは割り込みが発生した時に呼ばれるよう登録されている関数である。
割り込みハンドラは必ず次の割り込みを受け付けられるように EOI (End of Interrupt)を通知する義務がある。

## EOI

End of Interruput を通知するには EOI レジスタに任意の値を書き込めばいい。

## 設計思想

EOI 通知時点で割り込みの受付開始となるため、 EOI 通知の処理の前後で以下の設計思想が用いられる。

| 名称                 | 実行タイミング    | 優先度 | 内容                          | EOIとの関係               |
| ------------------ | ---------- | --- | --------------------------- | --------------------- |
| **Top Half**    | 割り込み発生直後   | 高   | できるだけ短い処理。割り込み要因の除去と最低限の作業。 | EOIを出す前後に行われる         |
| **Bottom Half** | 後でスケジュール実行 | 低   | 重い処理（パケット解析、コピー、通知など）       | Top Half終了後にソフト的に呼ばれる |
